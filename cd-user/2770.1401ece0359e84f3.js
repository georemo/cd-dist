(self.webpackChunkcd_user=self.webpackChunkcd_user||[]).push([[2770,4219],{2770:($,F,c)=>{c.r(F),c.d(F,{UserFrontModule:()=>j});var b=c(1074),r=c(549),N=c(5723),y=c(3845),M=c(7447),C=c(2869),d=c(8031),v=c(6143),o=c(1555),u=c(4945),m=c(2105),D=c(1042),e=c(4836);function p(s,t){if(1&s&&(e.\u0275\u0275elementStart(0,"ngb-alert",39),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&s){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("dismissible",!1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.error)}}function I(s,t){1&s&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1,"userName is required"),e.\u0275\u0275elementEnd())}function S(s,t){1&s&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1,"userName must be a valid userName address"),e.\u0275\u0275elementEnd())}function _(s,t){if(1&s&&(e.\u0275\u0275elementStart(0,"div",40),e.\u0275\u0275template(1,I,2,0,"div",41),e.\u0275\u0275template(2,S,2,0,"div",41),e.\u0275\u0275elementEnd()),2&s){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.loginInvalid),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.loginInvalid)}}function K(s,t){1&s&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1,"Password is required"),e.\u0275\u0275elementEnd())}function X(s,t){if(1&s&&(e.\u0275\u0275elementStart(0,"div",40),e.\u0275\u0275template(1,K,2,0,"div",41),e.\u0275\u0275elementEnd()),2&s){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.loginInvalid)}}const J=function(s){return{"is-invalid":s}};class L{constructor(t,n,i,a,l,h,f,T,Z,q){this.svSio=t,this.svUser=n,this.svSess=i,this.svMenu=a,this.svNazTable=l,this.svAcl=h,this.route=f,this.router=T,this.svNav=Z,this.svBase=q,this.debug=!0,this.baseModel=new o.BaseModel("",""),this.resourceGuid=(0,D.Z)(),this.loginInvalid=!1,this.rememberMe=!0,this.submitted=!1,this.error="",this.socketData=[],this.svSio.env=v.N,this.svSio.initSio(null,null),this.fg=new r.FormGroup({userName:new r.FormControl,password:new r.FormControl,rememberMe:new r.FormControl})}ngOnInit(){console.log("cd-user-v2::LoginComponent::ngOnInit()/StorageType.CdObjId:",o.StorageType.CdObjId);const t={storageType:o.StorageType.CdObjId,cdObjId:{appId:localStorage.getItem("appId"),resourceGuid:null,resourceName:"SidebarComponent",ngModule:"SharedModule",jwtToken:localStorage.getItem("accessToken"),socket:null,commTrack:null}};console.log("cd-user-v2::LoginComponent::ngOnInit()/filter:",t),this.sidebarInitData=this.svBase.searchLocalStorage(t),console.log("user/LoginComponent::ngOnInit()/this.sidebarInitData:",this.sidebarInitData);const n=localStorage.getItem("socketData");if(n){let a=function(l){return"appInit"===l.name?l:null};this.socketData=JSON.parse(n).filter(a),console.log("user/LoginComponent::ngOnInit()/this.socketData:",this.socketData)}else console.log("Err: socket data is not valid")}login(t){let n=t.value;const i=t.valid;console.log("user/LoginComponent::login/01"),console.log("user/LoginComponent::login/fg:",t),console.log("user/LoginComponent::login/valid:",i),this.submitted=!0,n=Object.assign({},n,{consumerGuid:v.N.consumerToken});try{console.log("user/LoginComponent::login/02"),i&&(console.log("user/LoginComponent::login/03"),this.initSession(n))}catch{console.log("user/LoginComponent::login/04"),this.errMsg="Something went wrong!!",this.loginInvalid=!0}}initSession(t){console.log("user/LoginComponent::initSession/01"),this.svUser.auth$(t).subscribe(n=>{if(!0===n.app_state.success){if(console.log("user/LoginComponent::initSession/res:",JSON.stringify(n)),this.svSess.appState=n.app_state,null!==n.app_state.sess.cd_token&&n.app_state.success){console.log("user/LoginComponent::initSession/02");const i=this.configPushPayload("login","push-menu",n.data.userData.userId);i.pushData.m=n.data.menuData,i.pushData.token=n.app_state.sess.cd_token,console.log("user/LoginComponent::initSession/envl:",i),this.svSio.sendPayLoad(i),this.svSess.createSess(n,this.svMenu),this.svUser.currentUser={name:`${n.data.userData.userName}`,picture:`${v.N.shellHost}/user-resources/${n.data.userData.userGuid}/avatar-01/a.jpg`},this.svNav.userMenu=[{title:"Profile",link:"/pages/cd-auth/register"},{title:"Log out",link:"/pages/cd-auth/logout"}],this.router.navigate(["/comm"],{queryParams:{token:n.app_state.sess.cd_token},skipLocationChange:!0,replaceUrl:!1})}}else this.errMsg="The userName and password were not valid",this.loginInvalid=!0,this.svSess.logout()})}configPushPayload(t,n,i){console.log("starting cd-user-v2::LoginComponent::configPushPayload()");const a={pushData:{pushGuid:"",m:"",pushRecepients:[],triggerEvent:"",emittEvent:"",token:"",isNotification:null,appSockets:this.socketData,commTrack:{initTime:Number(new Date),relayTime:null,relayed:!1,pushed:!1,pushTime:null,deliveryTime:null,delivered:!1,completed:!1,completedTime:null}},req:null,resp:null},l=[{userId:i,subTypeId:1,cdObjId:{appId:v.N.appId,ngModule:"UserFrontModule",resourceName:"LoginComponent",resourceGuid:(0,D.Z)(),jwtToken:"",socket:null,socketId:"",commTrack:{initTime:Number(new Date),relayTime:null,relayed:!1,pushed:!1,pushTime:null,deliveryTime:null,delivered:!1,completed:!1,completedTime:null}}}],h={...a};h.pushData.triggerEvent=t,h.pushData.emittEvent=n;const f={...l[0]};f.subTypeId=1,h.pushData.pushRecepients.push(f),console.log("cd-user-v2::LoginComponent::configPushPayload()/this.sidebarInitData:",JSON.stringify(this.sidebarInitData)),console.log("cd-user-v2::LoginComponent::configPushPayload()/this.sidebarInitData.value:",JSON.stringify(this.sidebarInitData.value));const T={...l[0]};return T.subTypeId=7,console.log("cd-user-v2::LoginComponent::configPushPayload()/uRecepient:",JSON.stringify(T)),T.cdObjId=this.sidebarInitData.value,h.pushData.pushRecepients.push(T),console.log("cd-user-v2::LoginComponent::configPushPayload()/envl:",JSON.stringify(h)),h}onFocus(){this.errMsg=""}}L.\u0275fac=function(t){return new(t||L)(e.\u0275\u0275directiveInject(o.SioClientService),e.\u0275\u0275directiveInject(o.UserService),e.\u0275\u0275directiveInject(o.SessService),e.\u0275\u0275directiveInject(o.MenuService),e.\u0275\u0275directiveInject(u.NazTableService),e.\u0275\u0275directiveInject(o.AclService),e.\u0275\u0275directiveInject(m.ActivatedRoute),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(o.NavService),e.\u0275\u0275directiveInject(o.BaseService))},L.\u0275cmp=e.\u0275\u0275defineComponent({type:L,selectors:[["app-login"]],decls:58,vars:10,consts:[[1,"home-btn","d-none","d-sm-block"],["routerLink",""],[1,"mdi","mdi-home-variant","h2","text-white"],[1,"container-fluid","p-0"],[1,"row","no-gutters"],[1,"col-lg-4"],[1,"authentication-page-content","p-4","d-flex","align-items-center","min-vh-100"],[1,"w-100"],[1,"row","justify-content-center"],[1,"col-lg-9"],[1,"text-center"],["routerLink","",1,"logo"],["src","assets/images/logo-dark.png","height","20","alt","logo"],[1,"font-size-18","mt-4"],[1,"text-muted"],[1,"p-2","mt-5"],[1,"form-horizontal",3,"formGroup","ngSubmit"],["type","danger",3,"dismissible",4,"ngIf"],[1,"form-group","auth-form-group-custom","mb-4"],[1,"ri-user-2-line","auti-custom-input-icon"],["for","userName"],["formControlName","userName","id","userName","placeholder","userName",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"ri-lock-2-line","auti-custom-input-icon"],["for","password"],["type","password","formControlName","password","id","password","placeholder","Password",1,"form-control",3,"ngClass"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","customControlInline",1,"custom-control-input"],["for","customControlInline",1,"custom-control-label"],[1,"mt-4","text-center"],["type","submit",1,"btn","btn-primary","w-md","waves-effect","waves-light"],["routerLink","/account/reset-password",1,"text-muted"],[1,"mdi","mdi-lock","mr-1"],[1,"mt-5","text-center"],["routerLink","/account/signup",1,"font-weight-medium","text-primary"],[1,"mdi","mdi-heart","text-danger"],[1,"col-lg-8"],[1,"authentication-bg"],[1,"bg-overlay"],["type","danger",3,"dismissible"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"a",1),e.\u0275\u0275element(2,"i",2),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"div")(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div")(12,"div",10)(13,"div")(14,"a",11),e.\u0275\u0275element(15,"img",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"h4",13),e.\u0275\u0275text(17,"Welcome Back !"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"p",14),e.\u0275\u0275text(19,"Sign in to continue to Nazox."),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"div",15)(21,"form",16),e.\u0275\u0275listener("ngSubmit",function(){return n.login(n.fg)}),e.\u0275\u0275template(22,p,2,2,"ngb-alert",17),e.\u0275\u0275elementStart(23,"div",18),e.\u0275\u0275element(24,"i",19),e.\u0275\u0275elementStart(25,"label",20),e.\u0275\u0275text(26,"User Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(27,"input",21),e.\u0275\u0275template(28,_,3,2,"div",22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"div",18),e.\u0275\u0275element(30,"i",23),e.\u0275\u0275elementStart(31,"label",24),e.\u0275\u0275text(32,"Password"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(33,"input",25),e.\u0275\u0275template(34,X,2,1,"div",22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"div",26),e.\u0275\u0275element(36,"input",27),e.\u0275\u0275elementStart(37,"label",28),e.\u0275\u0275text(38,"Remember me"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(39,"div",29)(40,"button",30),e.\u0275\u0275text(41,"Log In"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(42,"div",29)(43,"a",31),e.\u0275\u0275element(44,"i",32),e.\u0275\u0275text(45," Forgot your password?"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(46,"div",33)(47,"p"),e.\u0275\u0275text(48,"Don't have an account ? "),e.\u0275\u0275elementStart(49,"a",34),e.\u0275\u0275text(50," Register "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(51,"p"),e.\u0275\u0275text(52,"\xa9 2020 Nazox. Crafted with "),e.\u0275\u0275element(53,"i",35),e.\u0275\u0275text(54," by Themesdesign"),e.\u0275\u0275elementEnd()()()()()()()(),e.\u0275\u0275elementStart(55,"div",36)(56,"div",37),e.\u0275\u0275element(57,"div",38),e.\u0275\u0275elementEnd()()()()()),2&t&&(e.\u0275\u0275advance(21),e.\u0275\u0275property("formGroup",n.fg),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.error),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(6,J,n.submitted&&n.loginInvalid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.submitted&&n.loginInvalid),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(8,J,n.submitted&&n.loginInvalid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.submitted&&n.loginInvalid))},dependencies:[b.NgClass,b.NgIf,m.RouterLink,r.\u0275NgNoValidate,r.DefaultValueAccessor,r.NgControlStatus,r.NgControlStatusGroup,r.FormGroupDirective,r.FormControlName,y.NgbAlert]});class P{constructor(){}ngOnInit(){}}P.\u0275fac=function(t){return new(t||P)},P.\u0275cmp=e.\u0275\u0275defineComponent({type:P,selectors:[["app-register"]],decls:2,vars:0,template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"p"),e.\u0275\u0275text(1,"register works!"),e.\u0275\u0275elementEnd())}});class R{constructor(){}ngOnInit(){}}R.\u0275fac=function(t){return new(t||R)},R.\u0275cmp=e.\u0275\u0275defineComponent({type:R,selectors:[["app-user-profile"]],decls:2,vars:0,template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"p"),e.\u0275\u0275text(1,"user-profile works!"),e.\u0275\u0275elementEnd())}});var k=c(5126);const Y=new o.FormsService,Q=[{title:"ID",name:"userId",dbName:"user_id",type:o.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:o.ControlType.text,fieldFor:o.FieldFor.tableDisplay}],formatt:"alphanum"},{title:"Guid",name:"userGuid",dbName:"user_guid",type:o.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:o.ControlType.text,fieldFor:o.FieldFor.tableDisplay}],formatt:"alphanum",disabled:!0},{title:"Name",name:"userName",dbName:"user_name",type:o.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:o.ControlType.text,fieldFor:o.FieldFor.createForm},{controlType:o.ControlType.text,fieldFor:o.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[r.Validators.minLength(3),r.Validators.maxLength(20),r.Validators.required]]},{title:"F.Name",name:"fName",dbName:"f_name",type:o.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:o.ControlType.text,fieldFor:o.FieldFor.createForm},{controlType:o.ControlType.text,fieldFor:o.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[r.Validators.minLength(3),r.Validators.maxLength(20),r.Validators.required]]},{title:"M.Name",name:"mName",dbName:"m_name",type:o.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:o.ControlType.text,fieldFor:o.FieldFor.createForm},{controlType:o.ControlType.text,fieldFor:o.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[r.Validators.minLength(3),r.Validators.maxLength(20),r.Validators.required]]},{title:"L.Name",name:"lName",dbName:"l_name",type:o.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:o.ControlType.text,fieldFor:o.FieldFor.createForm},{controlType:o.ControlType.text,fieldFor:o.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[r.Validators.minLength(3),r.Validators.maxLength(20),r.Validators.required]]},{title:"NID",name:"nationalId",dbName:"national_id",type:o.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:o.ControlType.text,fieldFor:o.FieldFor.createForm},{controlType:o.ControlType.text,fieldFor:o.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[r.Validators.minLength(3),r.Validators.maxLength(20),r.Validators.required]]},{title:"PID",name:"passportId",dbName:"passport_id",type:o.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:o.ControlType.text,fieldFor:o.FieldFor.createForm},{controlType:o.ControlType.text,fieldFor:o.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[r.Validators.minLength(3),r.Validators.maxLength(20),r.Validators.required]]},{title:"Postal",name:"postalAddress",dbName:"postal_address",type:o.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:o.ControlType.text,fieldFor:o.FieldFor.createForm},{controlType:o.ControlType.text,fieldFor:o.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[r.Validators.minLength(1),r.Validators.maxLength(20),r.Validators.required]]},{title:"Mobile",name:"mobile",dbName:"mobile",type:o.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:o.ControlType.text,fieldFor:o.FieldFor.createForm},{controlType:o.ControlType.text,fieldFor:o.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[r.Validators.minLength(8),r.Validators.maxLength(14),r.Validators.required]]},{title:"Email",name:"email",dbName:"email",type:o.FieldType.string,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:o.ControlType.text,fieldFor:o.FieldFor.createForm},{controlType:o.ControlType.text,fieldFor:o.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0,formControlsConfig:["",[r.Validators.pattern(o.EMAIL_PATTERN),r.Validators.required]]},{title:"Company",name:"companyId",dbName:"company_id",type:o.FieldType.string,fetchable:!0,updateable:!0,index:!0,show:!0,controls:[{controlType:o.ControlType.text,fieldFor:o.FieldFor.tableDisplay},{controlType:o.ControlType.searchDropDown,fieldFor:o.FieldFor.createForm}],ddlInfo:{selData$:(0,k.of)([]),selValueField:"companyName",selIndex:"companyId",selPlaceholder:"...Choose",data:null},formatt:"text",disabled:!0,savable:!0,formControlsConfig:["",[r.Validators.minLength(3),r.Validators.maxLength(42),r.Validators.required]]},{title:"Gender",name:"gender",dbName:"gender",type:o.FieldType.boolean,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:o.ControlType.status,fieldFor:o.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0},{title:"Enabled",name:"userEnabled",dbName:"user_enabled",type:o.FieldType.boolean,fetchable:!0,updateable:!0,searchable:!0,show:!0,controls:[{controlType:o.ControlType.status,fieldFor:o.FieldFor.tableDisplay}],formatt:"text",isNameField:!0,savable:!0},{title:"Action",name:"action",type:o.FieldType.action,fetchable:!1,show:!0,controls:[{controlType:o.ControlType.action,fieldFor:o.FieldFor.tableDisplay},{controlType:o.ControlType.action,fieldFor:o.FieldFor.createForm}],Fn:"createUser"},{title:"Search",name:"iconSearch",type:o.FieldType.any,controls:[],formControlsConfig:["",[]]}],ee={data:{},valid:null,ctx:"Sys"},g={token:"",stepTitle:"Create User",stepItems:{nextButtonId:"stepToMenu"},tabPaneId:"userInfo",cardTitle:"User Information",cardTitleDesc:"Fill all information below",module:"User",controller:"User",formGroup:null,fields:Y.filterByFieldFor(Q,o.FieldFor.createForm)},W={name:"User Wizard",steps:[g]},U={select:["userId","userName","userGuid"],where:{}},B={getFn$:null,selIndex:U.select[0],selValueField:U.select[1],fetchFields:U.select,step:null,token:null,controlName:"userId"},te=[{menuName:"create",menuGuid:"bd9b5bda5ab",navLocation:"/user/user/create",actionType:o.ActionType.navigate},{menuName:"dashboard",menuGuid:"d27294db59c1",navLocation:"/user/user/dashboard",actionType:o.ActionType.navigate}];class A{constructor(t,n,i,a,l,h,f){this.aRoute=t,this.router=n,this.svBase=i,this.svNazTable=a,this.svAcl=l,this.svPage=h,this.svSess=f,this.dSource={fields:[],data:[]},this.cardTitle="User",this.cardBodyId="user",this.searchInputId="inputSearchUser",this.filter={},this.tpData=o.DEFAULT_TPD,this.ddlData=te,this.init()}ngOnInit(){this.aRoute.queryParams.subscribe(t=>{t&&this.svAcl.initComponent(t,this,this.svSess).then(n=>{})})}init(){this.baseModel=new o.BaseModel(g.module,g.controller),this.svBase.module=g.module,this.svBase.controller=g.controller,this.baseModel.data.fields=Q.filter(t=>t.fetchable||t.type===o.FieldType.action),this.baseModel.breadCrumbItems=this.svPage.setBreadCrumbs(g.controller,"List"),this.sQuery=this.svNazTable.initSQuery(this),this.dsEmittData=this.svNazTable.initEmittData(this)}execQuery(t){this.svNazTable.execQuery(t,this.svBase.getPaged$(this.sQuery,this.baseModel.sess.cd_token),this)}setSearchQuery(t){this.sQuery=t.sQuery,this.execQuery(t)}getSelect(){return this.baseModel.data.fields.filter(t=>t.fetchable).map(t=>t.name)}}A.\u0275fac=function(t){return new(t||A)(e.\u0275\u0275directiveInject(m.ActivatedRoute),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(o.BaseService),e.\u0275\u0275directiveInject(u.NazTableService),e.\u0275\u0275directiveInject(o.AclService),e.\u0275\u0275directiveInject(u.PageService),e.\u0275\u0275directiveInject(o.SessService))},A.\u0275cmp=e.\u0275\u0275defineComponent({type:A,selectors:[["app-list"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(u.NazTableComponent,5),2&t){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(n.nazTable=i.first)}},decls:1,vars:7,consts:[[3,"baseModel","cardTitle","cardBodyId","searchInputId","tpData","filter","ddlData","searchQuery"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"naz-table",0),e.\u0275\u0275listener("searchQuery",function(a){return n.setSearchQuery(a)}),e.\u0275\u0275elementEnd()),2&t&&e.\u0275\u0275property("baseModel",n.baseModel)("cardTitle",n.cardTitle)("cardBodyId",n.cardBodyId)("searchInputId",n.searchInputId)("tpData",n.tpData)("filter",n.filter)("ddlData",n.ddlData)},dependencies:[u.NazTableComponent]});var H=c(5861);class V{constructor(t,n,i,a,l,h,f){this.aRoute=t,this.router=n,this.svBase=i,this.svPage=a,this.svSess=l,this.svAcl=h,this.svNotif=f,this.formConfig={},this.init()}ngOnInit(){this.aRoute.queryParams.subscribe(t=>{this.svAcl.initComponent(t,this,this.svSess).then(n=>{})})}init(){this.baseModel=new o.BaseModel(g.module,g.controller),this.baseModel.breadCrumbItems=this.svPage.setBreadCrumbs(g.controller,"Edit"),this.baseModel.data.subTitle="only allowed fields are editable"}update(t){var n=this;return(0,H.Z)(function*(){n.svBase.update$(t,n.baseModel.token).subscribe(i=>{n.svNotif.emitNotif({pushRecepients:o.DEFAULT_PUSH_RECEPIENTS,pushData:i,emittEvent:"push-notif",triggerEvent:"send-notif",req:null,resp:i})})})()}}V.\u0275fac=function(t){return new(t||V)(e.\u0275\u0275directiveInject(m.ActivatedRoute),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(o.BaseService),e.\u0275\u0275directiveInject(u.PageService),e.\u0275\u0275directiveInject(o.SessService),e.\u0275\u0275directiveInject(o.AclService),e.\u0275\u0275directiveInject(o.NotificationService))},V.\u0275cmp=e.\u0275\u0275defineComponent({type:V,selectors:[["app-edit"]],decls:1,vars:2,consts:[[3,"baseModel","pageDescription","formConfig","updateQuery"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"naz-table-edit",0),e.\u0275\u0275listener("updateQuery",function(a){return n.update(a)}),e.\u0275\u0275elementEnd()),2&t&&e.\u0275\u0275property("baseModel",n.baseModel)("formConfig",n.formConfig)},dependencies:[u.EditComponent]});class z{constructor(t,n,i,a,l,h,f){this.aRoute=t,this.router=n,this.svBase=i,this.svPage=a,this.svAcl=l,this.svNotif=h,this.svSess=f,this.formConfig={},this.init()}ngOnInit(){this.aRoute.queryParams.subscribe(t=>{this.svAcl.initComponent(t,this,this.svSess).then(n=>{})})}init(){this.baseModel=new o.BaseModel(g.module,g.controller),this.baseModel.breadCrumbItems=this.svPage.setBreadCrumbs(g.controller,"Delete"),this.baseModel.data.subTitle="confirm before delete"}deleteItem(t){var n=this;return(0,H.Z)(function*(){n.svBase.delete$(t,n.baseModel.token).subscribe(i=>{n.svNotif.emitNotif({pushRecepients:o.DEFAULT_PUSH_RECEPIENTS,pushData:i,emittEvent:"push-notif",triggerEvent:"send-notif",req:null,resp:i})})})()}}z.\u0275fac=function(t){return new(t||z)(e.\u0275\u0275directiveInject(m.ActivatedRoute),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(o.BaseService),e.\u0275\u0275directiveInject(u.PageService),e.\u0275\u0275directiveInject(o.AclService),e.\u0275\u0275directiveInject(o.NotificationService),e.\u0275\u0275directiveInject(o.SessService))},z.\u0275cmp=e.\u0275\u0275defineComponent({type:z,selectors:[["app-delete"]],decls:1,vars:2,consts:[[3,"baseModel","pageDescription","formConfig","deleteQuery"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"naz-table-delete",0),e.\u0275\u0275listener("deleteQuery",function(a){return n.deleteItem(a)}),e.\u0275\u0275elementEnd()),2&t&&e.\u0275\u0275property("baseModel",n.baseModel)("formConfig",n.formConfig)},dependencies:[u.DeleteComponent]});class w{constructor(t,n,i){this.svMenu=t,this.svNotif=n,this.svForm=i,this.ddlData={config:{suppressScrollX:!0,wheelSpeed:.3},header:{title:{lable:"Notifications",cls:"",action:null},sideLink:{lable:"View All",cls:"",action:null}},footer:{label:"View All",icon:"",action:null},data:[{label:"item 1",description:"If several languages coalesce the grammar",time:"3 min ago"},{label:"item 2",description:"It will seem like simplified English",time:"1 hr ago"},{label:"item 3",description:"If several languages coalesce the grammar",time:"4 hr ago"}]},this.pushEnvelop={pushRecepients:[],pushData:null,emittEvent:"push-notif",triggerEvent:"send-notif",req:null,resp:null},this.numericNumberReg1="^-?[0-9]\\d*(\\.\\d{1,2})?$",this.numericNumberReg2="/^[0-9]d*$/",this.numericNumberReg3=new RegExp(/^-?[0-9]\\d*(\\.\\d{1,2})?$/,"i"),this.numericNumberReg4=new RegExp(/^[0-9]\d*$/,"i")}setIconsData$(t,n){t.fields.map((i,a)=>{i.name===n&&(t.fields[a].ddlInfo.selData$=(0,k.of)(this.ddlData),t.fields[a].ddlInfo.selIndex="iconId",t.fields[a].ddlInfo.selValueField="iconName",t.fields[a].ddlInfo.selPlaceholder="...Choose")})}setDdl$(t){if(t.token){const n=new k.Subject;let i=[];return t.getFn$.subscribe(a=>{const l=a;console.log("ModulemanService::setDdl$()/response:",l),l.app_state.success?(i=l.data.items,t.step.fields.map((h,f)=>{h.name===t.controlName&&(t.step.fields[f].ddlInfo.selData$=(0,k.of)(l.data.items),t.step.fields[f].ddlInfo.selIndex=t.selIndex,t.step.fields[f].ddlInfo.selValueField=t.selValueField,t.step.fields[f].ddlInfo.selPlaceholder="...Choose")}),n.next(i)):(this.pushEnvelop.pushData=l,this.pushEnvelop.resp=l,this.svNotif.emitNotif(this.pushEnvelop),n.next(i))}),n.asObservable()}return(0,k.of)([])}}w.\u0275fac=function(t){return new(t||w)(e.\u0275\u0275inject(o.MenuService),e.\u0275\u0275inject(o.NotificationService),e.\u0275\u0275inject(o.FormsService))},w.\u0275prov=e.\u0275\u0275defineInjectable({token:w,factory:w.\u0275fac,providedIn:"root"});class E{constructor(t,n){this.svBase=t,this.svUserBase=n}loadDdls(t,n){var i=this;return(0,H.Z)(function*(){B.token=t.token,B.step=n,B.controlName="userId",console.log("ConsumerModService::loadDdls()/userGetQuery:",U),B.getFn$=i.svBase.getPaged$(U,t.token,"Sys","Moduleman","Company"),yield i.svUserBase.setDdl$(yield B).subscribe(a=>{console.log("menu/ConsumerModService::loadDdls()/ret(companies):",a),n.fields.forEach(l=>{"userId"===l.name&&(l.ddlInfo.data=a)})})})()}}E.\u0275fac=function(t){return new(t||E)(e.\u0275\u0275inject(o.BaseService),e.\u0275\u0275inject(w))},E.\u0275prov=e.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac,providedIn:"root"});class O{constructor(t,n,i,a,l,h,f,T,Z,q,ne,se){this.aRoute=t,this.router=n,this.svAcl=i,this.svForm=a,this.svNotif=l,this.fb=h,this.svForms=f,this.svPage=T,this.svPush=Z,this.svBase=q,this.svUserFront=ne,this.svSess=se,this.newUser=ee,this.wizardModel=W,this.init()}ngOnInit(){this.aRoute.queryParams.subscribe(t=>{this.svAcl.initComponent(t,this,this.svSess).then(n=>{n&&(this.svPush.init(this),this.baseModel.data.step.token=this.baseModel.token)})})}ngAfterViewInit(){this.svUserFront.loadDdls(this.baseModel,this.baseModel.data.step).then(t=>{console.log("user/CreateComponent::ngAfterViewInit()/this.baseModel.data.step:",this.baseModel.data.step)})}init(){this.baseModel=new o.BaseModel(g.module,g.controller),this.baseModel.data.fields=this.svForms.filterByFieldFor(Q,o.FieldFor.createForm),this.baseModel.data.wizardModel=W,this.baseModel.data.step=this.svForm.filterStepsByController(this.baseModel.data.wizardModel,g.controller)[0],this.baseModel.data.form=this.fb.group(this.svForm.getFormControlConfig(Q)),this.baseModel.data.step.formGroup=this.baseModel.data.form,this.baseModel.breadCrumbItems=this.svPage.setBreadCrumbs(g.controller,"Create")}setSelectedIcon(t){this.svForm.setSelectedIcon(t,this.baseModel,this.baseModel.data.step)}save(t){let n;switch(t.controller){case"module":case"menu":break;case"user":n=this.svBase.create$(this.newUser,this.baseModel.token),this.svForm.saveForm(t,this.newUser,n,this.svPush.pushEnvelop,this.svNotif)}}finishFunction(){console.log("finishing!!")}}O.\u0275fac=function(t){return new(t||O)(e.\u0275\u0275directiveInject(m.ActivatedRoute),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(o.AclService),e.\u0275\u0275directiveInject(o.FormsService),e.\u0275\u0275directiveInject(o.NotificationService),e.\u0275\u0275directiveInject(r.FormBuilder),e.\u0275\u0275directiveInject(o.FormsService),e.\u0275\u0275directiveInject(u.PageService),e.\u0275\u0275directiveInject(o.CdPushService),e.\u0275\u0275directiveInject(o.BaseService),e.\u0275\u0275directiveInject(E),e.\u0275\u0275directiveInject(o.SessService))},O.\u0275cmp=e.\u0275\u0275defineComponent({type:O,selectors:[["app-create"]],decls:2,vars:0,template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"p"),e.\u0275\u0275text(1,"create works!"),e.\u0275\u0275elementEnd())}});class G{constructor(){}ngOnInit(){}}G.\u0275fac=function(t){return new(t||G)},G.\u0275cmp=e.\u0275\u0275defineComponent({type:G,selectors:[["app-dashboard"]],decls:2,vars:0,template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"p"),e.\u0275\u0275text(1,"dashboard works!"),e.\u0275\u0275elementEnd())}});const oe=[{path:"",redirectTo:"profile",pathMatch:"full"},{path:"login",component:L},{path:"register",component:P},{path:"profile",component:R},{path:"list",component:A},{path:"edit",component:V},{path:"delete",component:z},{path:"create",component:O},{path:"dashboard",component:G}];class x{constructor(t){this.router=t,t.events.subscribe(n=>{})}}x.\u0275fac=function(t){return new(t||x)(e.\u0275\u0275inject(m.Router))},x.\u0275mod=e.\u0275\u0275defineNgModule({type:x}),x.\u0275inj=e.\u0275\u0275defineInjector({imports:[m.RouterModule.forChild(oe),m.RouterModule]});class j{}j.\u0275fac=function(t){return new(t||j)},j.\u0275mod=e.\u0275\u0275defineNgModule({type:j}),j.\u0275inj=e.\u0275\u0275defineInjector({imports:[b.CommonModule,x,r.FormsModule,r.ReactiveFormsModule,y.NgbNavModule,y.NgbDropdownModule,y.NgbTooltipModule,y.NgbAccordionModule,u.NazUiModule,u.NazTableModule,u.NazCreateModule,u.NazEditModule,u.NazDeleteModule,y.NgbAlertModule,M.Ng2SearchPipeModule,C.ArchwizardModule,d.NgToggleModule,N.NgSelectModule,o.BaseModule.forChild(v.N),o.UserModule.forChild(v.N),o.CdPushModule.forChild(v.N)]})},6143:($,F,c)=>{c.d(F,{N:()=>b});const b={appId:"",production:!1,apiEndpoint:"http://cd-api-01:3001",sioEndpoint:"http://cd-api-01:3002",wsEndpoint:"ws://cd-sio-01:3000",CD_PORT:3001,consumerToken:"B0B3DA99-1859-A499-90F6-1E3F69575DCD",USER_RESOURCES:"http://web-01/user-resources",apiHost:"http://cd-api-01",sioHost:"http://cd-api-01",shellHost:"http://cd-shell-24",consumer:"",clientAppGuid:"ca0fe39f-92b2-484d-91ef-487d4fc462a2",clientAppId:2,SOCKET_IO_PORT:3002,defaultauth:"fackbackend",firebaseConfig:{apiKey:"",authDomain:"",databaseURL:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:"",measurementId:""}}},1042:($,F,c)=>{c.d(F,{Z:()=>D});var b,r=new Uint8Array(16);function N(){if(!b&&!(b=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return b(r)}const y=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,C=function M(e){return"string"==typeof e&&y.test(e)};for(var d=[],v=0;v<256;++v)d.push((v+256).toString(16).substr(1));const D=function m(e,p,I){var S=(e=e||{}).random||(e.rng||N)();if(S[6]=15&S[6]|64,S[8]=63&S[8]|128,p){I=I||0;for(var _=0;_<16;++_)p[I+_]=S[_];return p}return function o(e){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,I=(d[e[p+0]]+d[e[p+1]]+d[e[p+2]]+d[e[p+3]]+"-"+d[e[p+4]]+d[e[p+5]]+"-"+d[e[p+6]]+d[e[p+7]]+"-"+d[e[p+8]]+d[e[p+9]]+"-"+d[e[p+10]]+d[e[p+11]]+d[e[p+12]]+d[e[p+13]]+d[e[p+14]]+d[e[p+15]]).toLowerCase();if(!C(I))throw TypeError("Stringified UUID is invalid");return I}(S)}},5861:($,F,c)=>{function b(N,y,M,C,d,v,o){try{var u=N[v](o),m=u.value}catch(D){return void M(D)}u.done?y(m):Promise.resolve(m).then(C,d)}function r(N){return function(){var y=this,M=arguments;return new Promise(function(C,d){var v=N.apply(y,M);function o(m){b(v,C,d,o,u,"next",m)}function u(m){b(v,C,d,o,u,"throw",m)}o(void 0)})}}c.d(F,{Z:()=>r})}}]);